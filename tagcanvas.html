<!DOCTYPE html>
<html>
  <head>
    <title>TagCanvas example</title>
    <!--[if lt IE 9]><script type="text/javascript" src="excanvas.js"></script><![endif]-->
    <script src="js/tagcanvas.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    
  </head>
  <body>
    <h1>TagCanvas example page</h1>
    <div id="myCanvasContainer">
      <canvas width="600" height="600" id="myCanvas">
        <p>Why are you even using Internet Explorer?</p>
      </canvas>
    </div>
    <div id="cloudTags">
    </div>
    <script type="text/javascript">
      /* 
        This supports 2 topics. We should handle this list separately in order to support more flexibility. 
      */
      var topicColour = ["grey", "red", "green"];

      function mockExample() {
        var w1 = {text:"fish", topic:1, weight:20};
        var w2 = {text: "google", topic:2, weight:60};
        var w3 = {text: "hello", weight:30};
        var words = new Array(w1, w2, w3);
        drawCloudMap(words, '#cloudTags')
      }

      function drawCloudMap(words, container){
        /*
          to construct a word cloud based on the "words"
          and render it to "container"
          ! For each constructed, needs to listen to 'click' event
        */
        var colour;
        words = words.slice(0,30);
        list = "<ul>";
        for(w in words){
          text = words[w].text;
          weight = words[w].weight;
          topic = words[w].topic;
          if (words[w].topic != null) {
            colour = topicColour[topic];
          } else {
            colour = topicColour[0];
          }
          new_item = "<li> <a data-weight="+weight+"\" style=\"color:"+colour+"\" href=\"/mock\">"+text+"</a></li>"
          list = list.concat(new_item)
        }
        list = list.concat("</ul>");
        $(container).append(list)
      }
      window.onload = function() {
        mockExample();
        try {
          TagCanvas.Start('myCanvas','cloudTags',{
            textColour: null,
            outlineColour: '#ff00ff',
            reverse: true,
            depth: 0.8,
            maxSpeed: 0.05,
            weight: true,
            weightFrom: 'data-weight'
          });
        } catch(e) {
          // something went wrong, hide the canvas container
          document.getElementById('myCanvasContainer').style.display = 'none';
        }
      };
    </script>
  </body>
</html>